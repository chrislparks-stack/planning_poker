fragment UserFragment on User {
  id
  username
}

fragment DeckFragment on Deck {
  id
  cards
}

fragment UserCardFragment on UserCard {
  userId
  card
}

fragment GameFragment on Game {
  id
  table {
    ...UserCardFragment
  }
}

fragment RoomFragment on Room {
  id
  name
  isGameOver
  roomOwnerId
  users {
    ...UserFragment
  }
  deck {
    ...DeckFragment
  }
  game {
    ...GameFragment
  }
}

mutation CreateRoom($name: String, $cards: [String]) {
  createRoom(name: $name, cards: $cards) {
    ...RoomFragment
  }
}

mutation CreateUser($username: String!) {
  createUser(username: $username) {
    ...UserFragment
  }
}

mutation JoinRoom($roomId: UUID!, $user: UserInput!) {
  joinRoom(roomId: $roomId, user: $user) {
    ...RoomFragment
  }
}

mutation UpdateDeck($room_id: UUID!, $cards: [String!]!) {
  updateDeck(input: { room_id: $room_id, cards: $cards }) {
    ...RoomFragment
  }
}

mutation SetRoomOwner($roomId: UUID!, $userId: UUID!) {
  setRoomOwner(roomId: $roomId, userId: $userId) {
    ...RoomFragment
  }
}

mutation EditUser($userId: UUID!, $username: String!) {
  editUser(userId: $userId, username: $username) {
    ...UserFragment
  }
}

mutation Logout($userId: UUID!) {
  logout(userId: $userId)
}

mutation RemoveUserFromRoom($roomId: UUID!, $userId: UUID!) {
  removeUserFromRoom(roomId: $roomId, userId: $userId) {
    success
    message
  }
}

mutation ForceLogoutUser($userId: UUID!) {
  forceLogoutUser(userId: $userId) { success }
}

mutation PickCard($userId: UUID!, $roomId: UUID!, $card: String!) {
  pickCard(userId: $userId, roomId: $roomId, card: $card) {
    ...RoomFragment
  }
}

mutation ShowCards($roomId: UUID!) {
  showCards(roomId: $roomId) {
    ...RoomFragment
  }
}

mutation ResetGame($roomId: UUID!) {
  resetGame(roomId: $roomId) {
    ...RoomFragment
  }
}

subscription Room($roomId: UUID!) {
  room(roomId: $roomId) {
    ...RoomFragment
  }
}

query GetRoom($roomId: UUID!) {
  roomById(roomId: $roomId) {
    ...RoomFragment
  }
}
